stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
      - Dockerfile
      - requirements.txt
    outs:
      - .calkit/env-locks/main.json:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  _clean-nb-run-notebook:
    cmd: calkit nb clean "src/Finetune_ResNet.ipynb"
    deps:
      - src/Finetune_ResNet.ipynb
    outs:
      - .calkit/notebooks/cleaned/src/Finetune_ResNet.ipynb:
          cache: false
    desc: Automatically generated from the 'run-notebook' stage in 
      calkit.yaml. Changes made here will be overwritten.
  run-notebook:
    cmd: calkit nb execute --environment main --no-check --to html 
      "src/Finetune_ResNet.ipynb"
    deps:
      - .calkit/notebooks/cleaned/src/Finetune_ResNet.ipynb
      - .calkit/env-locks/main.json
    outs:
      - src/model.pt:
          cache: false
          persist: false
      - src/ResNet_results.csv:
          cache: false
          persist: false
      - .calkit/notebooks/executed/src/Finetune_ResNet.ipynb:
          cache: false
      - .calkit/notebooks/html/src/Finetune_ResNet.html:
          cache: false
    desc: Automatically generated from the 'run-notebook' stage in 
      calkit.yaml. Changes made here will be overwritten.
